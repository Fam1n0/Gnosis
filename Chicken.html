<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>HVS</title><style>body{margin:0;display:flex;flex-direction:column;justify-content:center;align-items:center;height:100vh;background-color:black;}canvas{border:1px solid white;width:100%;height:100%;}#c{display:flex;flex-direction:column;position:absolute;bottom:10px;width:90%;background:rgba(0,0,0,0.7);padding:10px;border-radius:5px;}#c .ctrl{margin-bottom:5px;}#c label{color:white;}#t{position:absolute;top:10px;left:10px;padding:10px;border-radius:5px;background:rgba(255,255,255,0.7);cursor:pointer;}</style><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.js"></script></head><body><input type="file" id="u" accept="image/*" style="display:none;"><canvas id="v"></canvas><div id="c"><div class="ctrl"><label for="f1">F1: </label><input type="range" id="f1" min="0" max="1" step="0.01" value="0.02"></div><div class="ctrl"><label for="f2">F2: </label><input type="range" id="f2" min="0" max="1" step="0.01" value="0.02"></div><div class="ctrl"><label for="f3">F3: </label><input type="range" id="f3" min="0" max="1" step="0.01" value="0.02"></div><div class="ctrl"><label for="f4">F4: </label><input type="range" id="f4" min="0" max="1" step="0.01" value="0.02"></div><div class="ctrl"><label for="i1">I1: </label><input type="range" id="i1" min="0" max="100" value="50"></div><div class="ctrl"><label for="i2">I2: </label><input type="range" id="i2" min="0" max="100" value="50"></div><div class="ctrl"><label for="i3">I3: </label><input type="range" id="i3" min="0" max="100" value="50"></div><div class="ctrl"><label for="i4">I4: </label><input type="range" id="i4" min="0" max="100" value="50"></div><div class="ctrl"><label for="h1">H1: </label><input type="range" id="h1" min="0" max="360" value="180"></div><div class="ctrl"><label for="h2">H2: </label><input type="range" id="h2" min="0" max="360" value="180"></div><div class="ctrl"><label for="h3">H3: </label><input type="range" id="h3" min="0" max="360" value="180"></div><div class="ctrl"><label for="h4">H4: </label><input type="range" id="h4" min="0" max="360" value="180"></div><div class="ctrl"><label for="s1">S1: </label><input type="range" id="s1" min="0" max="100" value="50"></div><div class="ctrl"><label for="s2">S2: </label><input type="range" id="s2" min="0" max="100" value="50"></div><div class="ctrl"><label for="s3">S3: </label><input type="range" id="s3" min="0" max="100" value="50"></div><div class="ctrl"><label for="s4">S4: </label><input type="range" id="s4" min="0" max="100" value="50"></div><div class="ctrl"><label for="l1">L1: </label><input type="range" id="l1" min="0" max="100" value="50"></div><div class="ctrl"><label for="l2">L2: </label><input type="range" id="l2" min="0" max="100" value="50"></div><div class="ctrl"><label for="l3">L3: </label><input type="range" id="l3" min="0" max="100" value="50"></div><div class="ctrl"><label for="l4">L4: </label><input type="range" id="l4" min="0" max="100" value="50"></div><button id="s">Save</button><input type="button" id="o" value="Upload"></div><button id="t">Toggle</button><script>$(document).ready(function(){$("#t").click(function(){$("#c").toggle();});$("#o").click(function(){$("#u").click();});let imgData,width,height;$("#u").change(function(e){const file=e.target.files[0];const reader=new FileReader();reader.onload=function(e){const img=new Image();img.onload=function(){const c=document.getElementById("v");c.width=img.width;c.height=img.height;const ctx=c.getContext("2d");ctx.drawImage(img,0,0);imgData=ctx.getImageData(0,0,c.width,c.height);applyStaticNoise();};img.src=e.target.result;};reader.readAsDataURL(file);});function applyStaticNoise(){const c=document.getElementById("v");const ctx=c.getContext("2d");const data=imgData.data;const output=new Uint8ClampedArray(data.length);const frequencies=[$("#f1"),$("#f2"),$("#f3"),$("#f4")].map(e=>parseFloat(e.val()));const intensities=[$("#i1"),$("#i2"),$("#i3"),$("#i4")].map(e=>parseFloat(e.val())/100);const hues=[$("#h1"),$("#h2"),$("#h3"),$("#h4")].map(e=>parseInt(e.val()));const saturations=[$("#s1"),$("#s2"),$("#s3"),$("#s4")].map(e=>parseInt(e.val())/100);const lightnesses=[$("#l1"),$("#l2"),$("#l3"),$("#l4")].map(e=>parseInt(e.val())/100);for(let y=0;y<c.height;y++){for(let x=0;x<c.width;x++){const idx=(y*c.width+x)*4;const noise=(Math.random()-0.5)*255*intensities.reduce((a,b)=>a+b,0)/4;let[r,g,b]=[data[idx]+noise*frequencies.reduce((a,b)=>a+b,0)/4,data[idx+1]+noise*frequencies.reduce((a,b)=>a+b,0)/4,data[idx+2]+noise*frequencies.reduce((a,b)=>a+b,0)/4];[r,g,b]=applyHSLAdjustment(r,g,b,hues.reduce((a,b)=>a+b,0)/4,saturations.reduce((a,b)=>a+b,0)/4,lightnesses.reduce((a,b)=>a+b,0)/4);output[idx]=r;output[idx+1]=g;output[idx+2]=b;output[idx+3]=data[idx+3];}}const outputImageData=new ImageData(output,c.width,c.height);ctx.putImageData(outputImageData,0,0);}function applyHSLAdjustment(r,g,b,h,s,l){let[hue,saturation,lightness]=rgbToHsl(r,g,b);hue=(hue*360+h)%360/360;saturation=Math.min(saturation+s,1);lightness=Math.min(lightness+l,1);return hslToRgb(hue,saturation,lightness);}function rgbToHsl(r,g,b){r/=255;g/=255;b/=255;const max=Math.max(r,g,b),min=Math.min(r,g,b);let h,s,l=(max+min)/2;if(max==min){h=s=0;}else{const d=max-min;s=l>0.5?d/(2-max-min):d/(max+min);switch(max){case r:h=(g-b)/d+(g<b?6:0);break;case g:h=(b-r)/d+2;break;case b:h=(r-g)/d+4;break;}h/=6;}return[h,s,l];}function hslToRgb(h,s,l){let r,g,b;if(s==0){r=g=b=l;}else{const hue2rgb=(p,q,t)=>{if(t<0)t+=1;if(t>1)t-=1;if(t<1/6)return p+(q-p)*6*t;if(t<1/3)return q;if(t<1/2)return p+(q-p)*(2/3-t)*6;return p;}const q=l<0.5?l*(1+s):l+s-l*s;const p=2*l-q;r=hue2rgb(p,q,h+1/3);g=hue2rgb(p,q,h);b=hue2rgb(p,q,h-1/3);}return[Math.round(r*255),Math.round(g*255),Math.round(b*255)];}["#f1","#f2","#f3","#f4","#i1","#i2","#i3","#i4","#h1","#h2","#h3","#h4","#s1","#s2","#s3","#s4","#l1","#l2","#l3","#l4"].forEach(id=>$(id).on("input",applyStaticNoise));$("#s").click(()=>{const link=document.createElement("a");const timestamp=new Date().toISOString().replace(/[:.]/g,"-");const fileName=`hv_${timestamp}.png`;link.download=fileName;link.href=$("#v")[0].toDataURL("image/png",1.0);link.click();});});</script></body></html>
