<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Moir√© Pattern Generator</title><style>body { margin: 0; overflow: hidden; background-color: black; color: white; } #controls { position: absolute; top: 20px; left: 20px; z-index: 1; color: #fff; } .slider { width: 300px; margin-bottom: 10px; } .slider-label { display: flex; justify-content: space-between; }</style></head><body><div id="controls"><div id="layerControls"></div><button id="addLayerButton">Add Layer</button><button id="saveButton">Save</button></div><script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script><script>let scene, camera, renderer, layers = [], layerCount = 0;function init() {scene = new THREE.Scene();camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);camera.position.z = 5;renderer = new THREE.WebGLRenderer();renderer.setSize(window.innerWidth, window.innerHeight);document.body.appendChild(renderer.domElement);const addLayerButton = document.getElementById('addLayerButton');addLayerButton.addEventListener('click', addLayer);const saveButton = document.getElementById('saveButton');saveButton.addEventListener('click', saveImage);window.addEventListener('resize', onWindowResize, false);}function addLayer() {layerCount++;if (layerCount > 6) return;const layerControls = document.getElementById('layerControls');const layerDiv = document.createElement('div');layerDiv.id = `layer${layerCount}`;layerDiv.innerHTML = `<div class="slider-label"><label for="speedSlider${layerCount}">Layer ${layerCount} Speed:</label><span id="speedValue${layerCount}">0.5</span></div><input type="range" id="speedSlider${layerCount}" class="slider" min="-2" max="2" step="0.01" value="0.5"><div class="slider-label"><label for="amplitudeSlider${layerCount}">Layer ${layerCount} Amplitude:</label><span id="amplitudeValue${layerCount}">0.3</span></div><input type="range" id="amplitudeSlider${layerCount}" class="slider" min="0.1" max="2" step="0.01" value="0.3"><div class="slider-label"><label for="separationSlider${layerCount}">Layer ${layerCount} Separation:</label><span id="separationValue${layerCount}">0.1</span></div><input type="range" id="separationSlider${layerCount}" class="slider" min="0.01" max="1" step="0.01" value="0.1">`;layerControls.appendChild(layerDiv);const speedSlider = document.getElementById(`speedSlider${layerCount}`);const speedValue = document.getElementById(`speedValue${layerCount}`);speedSlider.addEventListener('input', (e) => {layers[layerCount - 1].uniforms.speed.value = parseFloat(e.target.value);speedValue.textContent = e.target.value;});const amplitudeSlider = document.getElementById(`amplitudeSlider${layerCount}`);const amplitudeValue = document.getElementById(`amplitudeValue${layerCount}`);amplitudeSlider.addEventListener('input', (e) => {layers[layerCount - 1].uniforms.amplitude.value = parseFloat(e.target.value);amplitudeValue.textContent = e.target.value;});const separationSlider = document.getElementById(`separationSlider${layerCount}`);const separationValue = document.getElementById(`separationValue${layerCount}`);separationSlider.addEventListener('input', (e) => {layers[layerCount - 1].uniforms.separation.value = parseFloat(e.target.value);separationValue.textContent = e.target.value;});createLayer(layerCount);}function createLayer(index) {const geometry = new THREE.PlaneGeometry(10, 10, 100, 100);const uniforms = {time: { value: 0 }, speed: { value: 0.5 }, amplitude: { value: 0.3 }, separation: { value: 0.1 }};const material = new THREE.ShaderMaterial({uniforms: uniforms,vertexShader: `uniform float time;uniform float speed;uniform float amplitude;uniform float separation;varying vec2 vUv;void main() {vUv = uv;vec3 pos = position;pos.z += sin((position.x + position.y) * 10.0 - time * speed) * amplitude;pos.z += separation * ${index - 1}.0;gl_Position = projectionMatrix * modelViewMatrix * vec4(pos, 1.0);}`,fragmentShader: `varying vec2 vUv;void main() {gl_FragColor = vec4(vUv, 1.0, 1.0);}`,wireframe: true});const plane = new THREE.Mesh(geometry, material);scene.add(plane);layers.push({mesh: plane, uniforms: uniforms});}function onWindowResize() {camera.aspect = window.innerWidth / window.innerHeight;camera.updateProjectionMatrix();renderer.setSize(window.innerWidth, window.innerHeight);}function animate() {requestAnimationFrame(animate);layers.forEach(layer => {layer.uniforms.time.value += 0.01;});renderer.render(scene, camera);}function saveImage() {renderer.render(scene, camera);const link = document.createElement('a');link.href = renderer.domElement.toDataURL('image/png');link.download = `moire_pattern_${Date.now()}.png`;link.click();}init();animate();</script></body></html>
