<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Sator Speaker</title><style>body{margin:0;overflow:hidden;display:flex;justify-content:center;align-items:center;height:100vh;background-color:black}canvas{position:absolute;top:0;left:0;width:100%;height:100%;}.controls{position:absolute;top:10px;left:10px;z-index:10;display:flex;flex-direction:column;gap:10px;color:white}.hidden{display:none}button{font-size:16px;padding:10px;cursor:pointer}</style></head><body><canvas id="chakraCanvas"></canvas><div id="controls" class="controls"><button id="fullscreenButton">Toggle Fullscreen</button><button id="saveButton">Capture Image</button></div><script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.js"></script><script>document.addEventListener("DOMContentLoaded",function(){const chakraCanvas=document.getElementById('chakraCanvas');const ctx=chakraCanvas.getContext('2d');const fullscreenButton=document.getElementById('fullscreenButton');const saveButton=document.getElementById('saveButton');const controls=document.getElementById('controls');let video;function resizeCanvas(){chakraCanvas.width=window.innerWidth;chakraCanvas.height=window.innerHeight;}resizeCanvas();window.addEventListener('resize',resizeCanvas);fullscreenButton.addEventListener('click',function(){if(!document.fullscreenElement){document.documentElement.requestFullscreen();}else if(document.exitFullscreen){document.exitFullscreen();}});saveButton.addEventListener('click',function(){const link=document.createElement('a');const timestamp=new Date().toISOString().replace(/[:.]/g,'-');link.download=`chakra_visualization_${timestamp}.png`;link.href=chakraCanvas.toDataURL('image/png',1.0);link.click();});navigator.mediaDevices.getUserMedia({video:true}).then(stream=>{video=document.createElement('video');video.srcObject=stream;video.play();video.addEventListener('loadeddata',()=>{
function applyEdgeDetection(video,canvasCtx,canvasWidth,canvasHeight){const tempCanvas=document.createElement('canvas');tempCanvas.width=canvasWidth;tempCanvas.height=canvasHeight;const tempCtx=tempCanvas.getContext('2d');tempCtx.drawImage(video,0,0,canvasWidth,canvasHeight);const imgData=tempCtx.getImageData(0,0,canvasWidth,canvasHeight);const grayData=[];const sobelData=[];for(let i=0;i<imgData.data.length;i+=4){const avg=(imgData.data[i]+imgData.data[i+1]+imgData.data[i+2])/3;grayData.push(avg);}const sobelKernelX=[[-1,0,1],[-2,0,2],[-1,0,1]];const sobelKernelY=[[-1,-2,-1],[0,0,0],[1,2,1]];for(let y=0;y<canvasHeight;y++){for(let x=0;x<canvasWidth;x++){const pixelX=(sobelKernelX[0][0]*grayData[((y-1)*canvasWidth+(x-1))])+(sobelKernelX[0][1]*grayData[((y-1)*canvasWidth+x)])+(sobelKernelX[0][2]*grayData[((y-1)*canvasWidth+(x+1))])+(sobelKernelX[1][0]*grayData[(y*canvasWidth+(x-1))])+(sobelKernelX[1][1]*grayData[(y*canvasWidth+x)])+(sobelKernelX[1][2]*grayData[(y*canvasWidth+(x+1))])+(sobelKernelX[2][0]*grayData[((y+1)*canvasWidth+(x-1))])+(sobelKernelX[2][1]*grayData[((y+1)*canvasWidth+x)])+(sobelKernelX[2][2]*grayData[((y+1)*canvasWidth+(x+1))]);const pixelY=(sobelKernelY[0][0]*grayData[((y-1)*canvasWidth+(x-1))])+(sobelKernelY[0][1]*grayData[((y-1)*canvasWidth+x)])+(sobelKernelY[0][2]*grayData[((y-1)*canvasWidth+(x+1))])+(sobelKernelY[1][0]*grayData[(y*canvasWidth+(x-1))])+(sobelKernelY[1][1]*grayData[(y*canvasWidth+x)])+(sobelKernelY[1][2]*grayData[(y*canvasWidth+(x+1))])+(sobelKernelY[2][0]*grayData[((y+1)*canvasWidth+(x-1))])+(sobelKernelY[2][1]*grayData[((y+1)*canvasWidth+x)])+(sobelKernelY[2][2]*grayData[((y+1)*canvasWidth+(x+1))]);const magnitude=Math.sqrt((pixelX*pixelX)+(pixelY*pixelY));sobelData.push(magnitude,magnitude,magnitude,255);}}const edgeImageData=new ImageData(new Uint8ClampedArray(sobelData),canvasWidth,canvasHeight);canvasCtx.putImageData(edgeImageData,0,0);}new p5(p=>{let points=[];p.setup=()=>{p.createCanvas(chakraCanvas.width,chakraCanvas.height);p.noFill();p.strokeWeight(2);for(let i=0;i<100;i++){const angle=p.random(0,p.TWO_PI);const radius=p.random(20,100);points.push({x:p.width/2+radius*p.cos(angle),y:p.height/2+radius*p.sin(angle),angle:angle,step:p.random(0.01,0.05)});}p.frameRate(30);};p.draw=()=>{p.clear();applyEdgeDetection(video,p.drawingContext,p.width,p.height);for(let i=0;i<points.length;i++){const pt=points[i];pt.x+=p.cos(pt.angle)*pt.step*50;pt.y+=p.sin(pt.angle)*pt.step*50;if(pt.x<0||pt.x>p.width||pt.y<0||pt.y>p.height){pt.x=p.width/2;pt.y=p.height/2;}p.stroke(255,0,0,100);p.point(pt.x,pt.y);pt.angle+=p.random(-0.01,0.01);pt.step+=p.random(-0.001,0.001);}}},chakraCanvas);});});});</script></body></html>
